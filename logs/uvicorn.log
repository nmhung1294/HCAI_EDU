[Sun May  4 04:58:04 AM +07 2025] Starting Uvicorn...
INFO:     Will watch for changes in these directories: ['/media/ldmt/Data/Projects/HCAI_Edu']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [378905] using WatchFiles
INFO:     Started server process [378913]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
[Sun May  4 04:59:38 AM +07 2025] Script interrupted. Shutting down.
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [378913]
INFO:     Stopping reloader process [378905]
[Sun May  4 04:59:38 AM +07 2025] Uvicorn stopped.
[Sun May  4 05:11:53 AM +07 2025] Starting Uvicorn...
INFO:     Will watch for changes in these directories: ['/media/ldmt/Data/Projects/HCAI_Edu']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [386926] using WatchFiles
INFO:     Started server process [386935]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Tables in the database: dict_keys(['PJS_points', 'users'])
full_paths ['models/uploaded_files/Super IELTS Writing Tasks 1 - bản mini xem trước thử - IELTS Fighter biên soạn.pdf']
Initializing RAPTOR with collection_name: %s edubot_raptor
Loading provided documents...
Setting up RaptorRetriever
Setting up RetrieverQueryEngine
INFO:     127.0.0.1:50502 - "GET /docs HTTP/1.1" 200 OK
INFO:     127.0.0.1:50502 - "GET /openapi.json HTTP/1.1" 200 OK
[Sun May  4 05:13:07 AM +07 2025] Script interrupted. Shutting down.
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [386935]
INFO:     Stopping reloader process [386926]
[Sun May  4 05:13:08 AM +07 2025] Uvicorn stopped.
[Sun May  4 05:46:02 AM +07 2025] Starting Uvicorn...
INFO:     Will watch for changes in these directories: ['/media/ldmt/Data/Projects/HCAI_Edu']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [406991] using WatchFiles
[Sun May  4 05:46:05 AM +07 2025] Script interrupted. Shutting down.
[Sun May  4 05:46:12 AM +07 2025] Starting Uvicorn...
INFO:     Will watch for changes in these directories: ['/media/ldmt/Data/Projects/HCAI_Edu']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [407155] using WatchFiles
INFO:     Started server process [407000]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ERROR:    Traceback (most recent call last):
  File "/media/ldmt/Data/Projects/HCAI_Edu/conda_env/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/media/ldmt/Data/Projects/HCAI_Edu/conda_env/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "/media/ldmt/Data/Projects/HCAI_Edu/conda_env/lib/python3.11/asyncio/runners.py", line 123, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/media/ldmt/Data/Projects/HCAI_Edu/conda_env/lib/python3.11/site-packages/starlette/routing.py", line 700, in lifespan
    await receive()
  File "/media/ldmt/Data/Projects/HCAI_Edu/conda_env/lib/python3.11/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/media/ldmt/Data/Projects/HCAI_Edu/conda_env/lib/python3.11/asyncio/queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

Tables in the database: dict_keys(['PJS_points', 'users'])
full_paths ['models/uploaded_files/Super IELTS Writing Tasks 1 - bản mini xem trước thử - IELTS Fighter biên soạn.pdf']
Initializing RAPTOR with collection_name: %s edubot_raptor
Loading provided documents...
Setting up RaptorRetriever
Setting up RetrieverQueryEngine
INFO:     Stopping reloader process [406991]
[Sun May  4 05:46:31 AM +07 2025] Uvicorn stopped.
INFO:     Started server process [407164]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Tables in the database: dict_keys(['PJS_points', 'users'])
full_paths ['models/uploaded_files/Super IELTS Writing Tasks 1 - bản mini xem trước thử - IELTS Fighter biên soạn.pdf']
Initializing RAPTOR with collection_name: %s edubot_raptor
Loading provided documents...
Setting up RaptorRetriever
Setting up RetrieverQueryEngine
Initializing RAPTOR with collection_name: %s IuLAyPWiZwV4unB2TdXqvXpyXup1
Force rebuilding collection...
An error occurred during initialization: %s Collection [IuLAyPWiZwV4unB2TdXqvXpyXup1] does not exists
Initializing RAPTOR with collection_name: %s IuLAyPWiZwV4unB2TdXqvXpyXup1
Force rebuilding collection...
An error occurred during initialization: %s Collection [IuLAyPWiZwV4unB2TdXqvXpyXup1] does not exists
INFO:     127.0.0.1:46510 - "POST /chat_with_file HTTP/1.1" 500 Internal Server Error
Initializing RAPTOR with collection_name: %s IuLAyPWiZwV4unB2TdXqvXpyXup1
Force rebuilding collection...
An error occurred during initialization: %s Collection [IuLAyPWiZwV4unB2TdXqvXpyXup1] does not exists
Initializing RAPTOR with collection_name: %s IuLAyPWiZwV4unB2TdXqvXpyXup1
Force rebuilding collection...
An error occurred during initialization: %s Collection [IuLAyPWiZwV4unB2TdXqvXpyXup1] does not exists
INFO:     127.0.0.1:46510 - "POST /chat_with_file HTTP/1.1" 500 Internal Server Error
Initializing RAPTOR with collection_name: %s IuLAyPWiZwV4unB2TdXqvXpyXup1
Force rebuilding collection...
An error occurred during initialization: %s Collection [IuLAyPWiZwV4unB2TdXqvXpyXup1] does not exists
Initializing RAPTOR with collection_name: %s IuLAyPWiZwV4unB2TdXqvXpyXup1
Force rebuilding collection...
An error occurred during initialization: %s Collection [IuLAyPWiZwV4unB2TdXqvXpyXup1] does not exists
INFO:     127.0.0.1:55230 - "POST /chat_with_file HTTP/1.1" 500 Internal Server Error
WARNING:  WatchFiles detected changes in 'models/raptor_query.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [407164]
[Sun May  4 05:49:27 AM +07 2025] Script interrupted. Shutting down.
[Sun May  4 05:49:30 AM +07 2025] Starting Uvicorn...
INFO:     Will watch for changes in these directories: ['/media/ldmt/Data/Projects/HCAI_Edu']
ERROR:    [Errno 98] Address already in use
[Sun May  4 05:49:30 AM +07 2025] Uvicorn stopped.
INFO:     Started server process [409363]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Stopping reloader process [407155]
[Sun May  4 05:49:39 AM +07 2025] Uvicorn stopped.
[Sun May  4 05:50:50 AM +07 2025] Script interrupted. Shutting down.
[Sun May  4 05:50:51 AM +07 2025] Starting Uvicorn...
INFO:     Will watch for changes in these directories: ['/media/ldmt/Data/Projects/HCAI_Edu']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [410506] using WatchFiles
INFO:     Started server process [410515]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Tables in the database: dict_keys(['PJS_points', 'users'])
full_paths ['models/uploaded_files/Super IELTS Writing Tasks 1 - bản mini xem trước thử - IELTS Fighter biên soạn.pdf']
Initializing RAPTOR with collection_name: %s edubot_raptor
Loading provided documents...
Setting up RaptorRetriever
Setting up RetrieverQueryEngine
INFO:     127.0.0.1:56976 - "GET /docs HTTP/1.1" 200 OK
INFO:     127.0.0.1:56976 - "GET /openapi.json HTTP/1.1" 200 OK
Initializing RAPTOR with collection_name: %s IuLAyPWiZwV4unB2TdXqvXpyXup1
Force rebuilding collection...
Collection 'IuLAyPWiZwV4unB2TdXqvXpyXup1' does not exist. Skipping deletion.
Loading provided documents...
Creating RaptorPack and building raptor tree...
Generating embeddings for level 0.
Performing clustering for level 0.
Generating summaries for level 0 with 1 clusters.
Level 0 created summaries/clusters: 1
Generating embeddings for level 1.
Performing clustering for level 1.
Generating summaries for level 1 with 1 clusters.
Level 1 created summaries/clusters: 1
Generating embeddings for level 2.
Performing clustering for level 2.
Generating summaries for level 2 with 1 clusters.
Level 2 created summaries/clusters: 1
Setting up RaptorRetriever
Setting up RetrieverQueryEngine
RAPTOR CUSTOM INTENT
INFO:     127.0.0.1:56990 - "POST /chat_with_file HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'models/chat.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [410515]
[Sun May  4 05:52:39 AM +07 2025] Script interrupted. Shutting down.
[Sun May  4 05:52:42 AM +07 2025] Starting Uvicorn...
INFO:     Will watch for changes in these directories: ['/media/ldmt/Data/Projects/HCAI_Edu']
ERROR:    [Errno 98] Address already in use
[Sun May  4 05:52:43 AM +07 2025] Uvicorn stopped.
[Sun May  4 05:52:49 AM +07 2025] Script interrupted. Shutting down.
INFO:     Started server process [411735]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Stopping reloader process [410506]
[Sun May  4 05:52:59 AM +07 2025] Uvicorn stopped.
[Sun May  4 05:53:04 AM +07 2025] Starting Uvicorn...
INFO:     Will watch for changes in these directories: ['/media/ldmt/Data/Projects/HCAI_Edu']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [412146] using WatchFiles
INFO:     Started server process [412154]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Tables in the database: dict_keys(['PJS_points', 'users'])
full_paths ['models/uploaded_files/Super IELTS Writing Tasks 1 - bản mini xem trước thử - IELTS Fighter biên soạn.pdf']
Initializing RAPTOR with collection_name: %s edubot_raptor
Loading provided documents...
Setting up RaptorRetriever
Setting up RetrieverQueryEngine
INFO:     127.0.0.1:44522 - "GET /docs HTTP/1.1" 200 OK
INFO:     127.0.0.1:44522 - "GET /openapi.json HTTP/1.1" 200 OK
Initializing RAPTOR with collection_name: %s IuLAyPWiZwV4unB2TdXqvXpyXup1
Loading provided documents...
Setting up RaptorRetriever
Setting up RetrieverQueryEngine
RAPTOR CUSTOM INTENT
Mixture of Experts (MoE) is a neural network architecture that increases model capacity without proportionally increasing computation. It achieves this by activating only a subset of expert sub-networks for each input. The structure involves input, a router, selection of top-k experts, expert processing, and a weighted output.

INFO:     127.0.0.1:44532 - "POST /chat_with_file HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'test_api.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [412154]
INFO:     Started server process [412919]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Tables in the database: dict_keys(['PJS_points', 'users'])
full_paths ['models/uploaded_files/Super IELTS Writing Tasks 1 - bản mini xem trước thử - IELTS Fighter biên soạn.pdf']
Initializing RAPTOR with collection_name: %s edubot_raptor
Loading provided documents...
Setting up RaptorRetriever
Setting up RetrieverQueryEngine
Initializing RAPTOR with collection_name: %s IuLAyPWiZwV4unB2TdXqvXpyXup1
Loading provided documents...
Setting up RaptorRetriever
Setting up RetrieverQueryEngine
RAPTOR CUSTOM INTENT
Mixture of Experts (MoE) is a neural network architecture that increases model capacity without proportionally increasing computation. It achieves this by activating only a subset of expert sub-networks for each input. The structure involves input, a router, selection of top-k experts, expert processing, and a weighted output.

INFO:     127.0.0.1:50028 - "POST /chat_with_file HTTP/1.1" 200 OK
[Sun May  4 05:54:43 AM +07 2025] Script interrupted. Shutting down.
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [412919]
INFO:     Stopping reloader process [412146]
[Sun May  4 05:54:43 AM +07 2025] Uvicorn stopped.
